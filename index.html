<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhaps Catcher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #0a0e27;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }
        
        .container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            height: 100%;
            padding: 20px;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(15, 23, 42, 0.9);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .title {
            font-size: 28px;
            font-weight: bold;
            color: #22c55e;
            text-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }
        
        .stats {
            display: flex;
            gap: 40px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #22c55e;
            text-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }
        
        .game-wrapper {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        canvas {
            background: #000;
            border-radius: 15px;
            box-shadow: 0 0 50px rgba(34, 197, 94, 0.5), inset 0 0 50px rgba(34, 197, 94, 0.1);
            display: block;
            cursor: crosshair;
            max-width: 100%;
            max-height: 100%;
            border: 2px solid rgba(34, 197, 94, 0.3);
        }
        
        .footer {
            background: rgba(15, 23, 42, 0.9);
            padding: 15px 30px;
            border-radius: 15px;
            text-align: center;
            font-size: 14px;
            color: #888;
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .instructions {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .instruction-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #22c55e;
        }
        
        /* Mobile controls */
        .mobile-controls {
            display: none;
            gap: 20px;
            justify-content: center;
            padding: 20px;
        }
        
        .mobile-controls.show {
            display: flex;
        }
        
        .control-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(34, 197, 94, 0.3);
            border: 2px solid rgba(34, 197, 94, 0.6);
            color: #22c55e;
            font-size: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            user-select: none;
            transition: all 0.1s;
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.3);
        }
        
        .control-btn:active {
            background: rgba(34, 197, 94, 0.6);
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.6);
            transform: scale(0.95);
        }
        
        @media (max-width: 768px) {
            .container {
                gap: 10px;
                padding: 10px;
            }
            
            .header {
                padding: 10px 15px;
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .title {
                font-size: 20px;
            }
            
            .stats {
                gap: 20px;
            }
            
            .stat-value {
                font-size: 18px;
            }
            
            .footer {
                padding: 10px 15px;
                font-size: 12px;
            }
            
            .instructions {
                gap: 15px;
                flex-direction: column;
            }
            
            .instruction-item {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">ü™ô Rhaps Catcher</div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-label">Moedas Capturadas</div>
                    <div class="stat-value" id="score">0</div>
                </div>
                <div class="stat">
                    <div class="stat-label">Recorde Pessoal</div>
                    <div class="stat-value" id="highScore">0</div>
                </div>
            </div>
        </div>
        
        <div class="game-wrapper">
            <canvas id="gameCanvas"></canvas>
        </div>
        
        <div class="mobile-controls" id="mobileControls">
            <button class="control-btn" id="leftBtn">‚Üê</button>
            <button class="control-btn" id="rightBtn">‚Üí</button>
        </div>
        
        <div class="footer">
            <div class="instructions">
                <div class="instruction-item" id="desktopHint">
                    üñ±Ô∏è <strong>Mouse:</strong> Mova o personagem
                </div>
                <div class="instruction-item">
                    ‚ö° <strong>Dica:</strong> A velocidade aumenta conforme voc√™ pega moedas!
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        function resizeCanvas() {
            const wrapper = document.querySelector('.game-wrapper');
            canvas.width = Math.min(900, wrapper.clientWidth - 40);
            canvas.height = Math.min(700, wrapper.clientHeight - 40);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        const player = {
            x: canvas.width / 2 - 50,
            y: canvas.height - 120,
            width: 100,
            height: 100,
            speed: 8,
            targetX: canvas.width / 2 - 50
        };
        
        let coins = [];
        let score = 0;
        let highScore = parseInt(localStorage.getItem('rhapsHighScore')) || 0;
        let gameSpeed = 2;
        let spawnRate = 120;
        let spawnCounter = 0;
        
        const keys = {};
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
        });
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        let mouseX = canvas.width / 2;
        
        // Mouse input
        document.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            if (e.clientX >= rect.left && e.clientX <= rect.right) {
                mouseX = e.clientX - rect.left;
            }
        });
        
        // Touch input (para celular)
        document.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const rect = canvas.getBoundingClientRect();
            if (e.touches.length > 0) {
                const touch = e.touches[0];
                if (touch.clientX >= rect.left && touch.clientX <= rect.right) {
                    mouseX = touch.clientX - rect.left;
                }
            }
        }, { passive: false });
        
        document.getElementById('highScore').textContent = highScore;
        
        // Detectar se √© mobile e mostrar controles
        const isMobile = () => {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        };
        
        const mobileControls = document.getElementById('mobileControls');
        const desktopHint = document.getElementById('desktopHint');
        
        if (isMobile()) {
            mobileControls.classList.add('show');
            desktopHint.style.display = 'none';
        }
        
        // Bot√µes mobile
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');
        
        let leftPressed = false;
        let rightPressed = false;
        
        leftBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            leftPressed = true;
        });
        leftBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            leftPressed = false;
        });
        leftBtn.addEventListener('mousedown', () => {
            leftPressed = true;
        });
        leftBtn.addEventListener('mouseup', () => {
            leftPressed = false;
        });
        
        rightBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            rightPressed = true;
        });
        rightBtn.addEventListener('touchend', (e) => {
            e.preventDefault();
            rightPressed = false;
        });
        rightBtn.addEventListener('mousedown', () => {
            rightPressed = true;
        });
        rightBtn.addEventListener('mouseup', () => {
            rightPressed = false;
        });
        
        function spawnCoin() {
            const coin = {
                x: Math.random() * (canvas.width - 40),
                y: -40,
                width: 40,
                height: 40,
                speed: gameSpeed
            };
            coins.push(coin);
        }
        
        function update() {
            if (keys['ArrowLeft'] || keys['a'] || keys['A'] || leftPressed) {
                player.targetX = Math.max(0, player.targetX - player.speed);
            }
            if (keys['ArrowRight'] || keys['d'] || keys['D'] || rightPressed) {
                player.targetX = Math.min(canvas.width - player.width, player.targetX + player.speed);
            }
            
            const diff = mouseX - (player.x + player.width / 2);
            if (Math.abs(diff) > 20) {
                player.targetX = mouseX - player.width / 2;
                player.targetX = Math.max(0, Math.min(canvas.width - player.width, player.targetX));
            }
            
            if (Math.abs(player.x - player.targetX) > 2) {
                player.x += (player.targetX - player.x) * 0.15;
            } else {
                player.x = player.targetX;
            }
            
            if (player.x < 0) player.x = 0;
            if (player.x + player.width > canvas.width) {
                player.x = canvas.width - player.width;
            }
            
            spawnCounter++;
            if (spawnCounter > spawnRate) {
                spawnCoin();
                spawnCounter = 0;
            }
            
            coins.forEach((coin, index) => {
                coin.y += coin.speed;
                
                if (coin.y > canvas.height) {
                    coins.splice(index, 1);
                }
                
                if (rectCollision(player, coin)) {
                    coins.splice(index, 1);
                    score++;
                    document.getElementById('score').textContent = score;
                    
                    if (score % 5 === 0) {
                        gameSpeed += 0.3;
                        spawnRate = Math.max(60, spawnRate - 5);
                    }
                    
                    if (score > highScore) {
                        highScore = score;
                        localStorage.setItem('rhapsHighScore', highScore);
                        document.getElementById('highScore').textContent = highScore;
                    }
                }
            });
        }
        
        function rectCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }
        
        function draw() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = 'rgba(34, 197, 94, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width; i += 40) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }
            for (let i = 0; i < canvas.height; i += 40) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(canvas.width, i);
                ctx.stroke();
            }
            
            ctx.save();
            ctx.translate(player.x + player.width / 2, player.y + player.height / 2);
            
            ctx.shadowColor = 'rgba(34, 197, 94, 0.5)';
            ctx.shadowBlur = 20;
            
            ctx.fillStyle = '#00d4ff';
            ctx.shadowColor = 'rgba(0, 212, 255, 0.6)';
            ctx.shadowBlur = 15;
            ctx.fillRect(-20, -10, 40, 45);
            
            ctx.fillStyle = '#22c55e';
            ctx.shadowColor = 'rgba(34, 197, 94, 0.6)';
            ctx.shadowBlur = 15;
            ctx.beginPath();
            ctx.arc(0, -25, 18, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#00ffff';
            ctx.shadowColor = 'rgba(0, 255, 255, 0.8)';
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.arc(-8, -28, 4, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(8, -28, 4, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.fillStyle = '#000';
            ctx.shadowColor = 'rgba(0, 0, 0, 0)';
            ctx.shadowBlur = 0;
            ctx.beginPath();
            ctx.arc(-8, -28, 2, 0, Math.PI * 2);
            ctx.fill();
            ctx.beginPath();
            ctx.arc(8, -28, 2, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.strokeStyle = '#22c55e';
            ctx.lineWidth = 3;
            ctx.shadowColor = 'rgba(34, 197, 94, 0.5)';
            ctx.shadowBlur = 10;
            ctx.beginPath();
            ctx.arc(0, -20, 6, 0, Math.PI);
            ctx.stroke();
            
            ctx.strokeStyle = '#00ffff';
            ctx.lineWidth = 2;
            ctx.shadowColor = 'rgba(0, 255, 255, 0.5)';
            ctx.shadowBlur = 8;
            ctx.beginPath();
            ctx.moveTo(-12, -35);
            ctx.lineTo(-15, -45);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(12, -35);
            ctx.lineTo(15, -45);
            ctx.stroke();
            
            ctx.restore();
            
            coins.forEach(coin => {
                ctx.save();
                ctx.translate(coin.x + coin.width / 2, coin.y + coin.height / 2);
                
                ctx.shadowColor = 'rgba(255, 215, 0, 0.8)';
                ctx.shadowBlur = 20;
                
                ctx.fillStyle = '#FFD700';
                ctx.beginPath();
                ctx.arc(0, 0, 20, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.strokeStyle = '#FFA500';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                ctx.fillStyle = '#FF6B35';
                ctx.font = 'bold 24px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('‚Çø', 0, 0);
                
                ctx.restore();
            });
            
            ctx.fillStyle = '#22c55e';
            ctx.font = 'bold 14px Arial';
            ctx.shadowColor = 'rgba(34, 197, 94, 0.5)';
            ctx.shadowBlur = 8;
            ctx.fillText(`‚ö° ${gameSpeed.toFixed(1)}x`, 15, 25);
        }
        
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }
        
        gameLoop();
    </script>
</body>
</html>
